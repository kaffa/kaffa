使用闲置Android手机作Web服务器
############################################################

:date: 2024-02-06 21:30
:author: Kaffa
:category: digital
:tags: LAMP,Android
:slug: android-mobile-as-a-server-of-apache-php-mysql
:summary: 在闲置的手机上搭建LAMP服务是一件趣事
:image: /static/img/2024/hero.png


将闲置手机变成个人云服务器
==============================

譬如，`本站 <http://[240e:3b4:38ee:1af0:3ae6:aff:fe89:67ad]:8001/index.html>`_\ 就搭建在个人闲置的手机上。

若有兴趣了解如何搭建，不妨悦读本文。

概念
====================

云服务器：是指阿里云、腾讯云销售的服务器。


困难
====================

- 缺少独立IP：虽然我们的电信网络没有提供独立公网 IPv4，但 IPv6 已然成熟，且全球设备都有唯一的 IPv6地址。
- 缺少云服务器：从计算机和服务器的角度理解，手机是就一台 ARM CPU 的计算机，且存储空间还不低。如果安装好 Apache、PHP、MySQL 等服务，那么和购买的虚拟主机就没有差别了，如果需要上传大文件，由于就在本地，甚至可以插U盘直接拷贝。

配置过程
====================

配置IPv6
--------------------

1. 确认自己的光猫和路由器支持 IPv6；
2. 获得路由器管理密码（通常印刷在设备下方的标签上），或者网络寻找对应路由器的型号的超级密码，登录管理界面，将网络设置为，光猫桥接路由器；
3. 打开路由器 IPv6 设置，通过路由器拨号上网，这样家中局域网的设备均可获得独立的 IPv6。

如果在打开IPV6这步有疑问，可以搜索一下，网上有很多教程。

手机安装服务器
--------------------

AWebServer 比较好用，内置 apache + php + mysql + phpmyadmin

1. 在手机上安装 AWebServer；
2. 在电源和节能管理中，设置为不杀 AWebServer 后台；
3. 配置一个 8000 或以上的端口，并启动服务；
4. 在 WiFi 中查看手机 IPv6 地址；
5. 插上电源线，把手机屏幕亮度调到最低。

此时全球任何一个地方访问到这个站点了。

服务器IPv6地址发生变化
----------------------------------------

如果服务器的 IPv6 因为电信的分配发生变化，则需要定期上报，解决方案有两种：

1. 用一个支持 API 的 DNS 服务器，侦测 IP 变化，当发现 IPv6 变了，则通过 API 刷新 DNS。
2. 用一个本地常驻程序侦测 IP 变化，用一个支持 API 提交的短网址服务作为中间跳转地址。

